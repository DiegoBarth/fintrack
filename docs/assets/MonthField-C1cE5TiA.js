import{T as e,w as t}from"./react-query-B5bzpzJa.js";import{C as n,s as r}from"./vendor-react-u-2Pnofo.js";import{n as i}from"./DateField-C-M_oAib.js";var a=e(),o=n(),s=t();function c({value:e,onChange:t,required:n}){let c=(0,a.useRef)(Math.random().toString(36).slice(2)),[l,u]=(0,a.useState)(!1),d=e?Number(e.split(`-`)[0]):new Date().getFullYear();e&&(()=>{let[t,n]=e.split(`-`);return new Date(Number(t),Number(n)-1,1)})();let[f,p]=(0,a.useState)(d),m=(0,a.useRef)(null),h=m.current?.getBoundingClientRect(),g=e?Number(e.split(`-`)[1])-1:void 0,_=Array.from({length:12}).map((e,t)=>r(new Date(2e3,t,1),`MMM`,{locale:i}));return(0,a.useEffect)(()=>{if(l){let e=e=>{e.detail!==c.current&&u(!1)};return window.addEventListener(`monthfield:open`,e),window.dispatchEvent(new CustomEvent(`monthfield:open`,{detail:c.current})),()=>{window.removeEventListener(`monthfield:open`,e)}}},[l]),(0,s.jsxs)(`div`,{className:`relative flex items-center gap-2`,children:[(0,s.jsx)(`button`,{ref:m,type:`button`,onClick:()=>u(!l),className:`w-full border border-gray-300 dark:border-gray-600\r
               bg-white dark:bg-gray-700\r
               text-gray-900 dark:text-gray-100\r
               rounded-md p-2 text-left focus:outline-none\r
               focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500`,children:e?r(new Date(Number(e.split(`-`)[0]),Number(e.split(`-`)[1])-1,1),`MMMM yyyy`,{locale:i}):n?(0,s.jsx)(`span`,{className:`text-muted-foreground`,children:`Selecione um mês *`}):(0,s.jsx)(`span`,{className:`text-muted-foreground`,children:`Selecione um mês`})}),e&&(0,s.jsx)(`button`,{type:`button`,className:`ml-1 px-2 py-1 rounded text-xs\r
                  text-gray-900 dark:text-gray-100\r
                  focus:outline-none focus:ring-2\r
                  focus:ring-gray-300 dark:focus:ring-gray-500`,onClick:()=>t(void 0),children:`✕`}),l&&h&&(0,o.createPortal)((0,s.jsxs)(`div`,{className:`fixed z-[9999]\r
                     bg-white dark:bg-gray-800\r
                     border border-gray-200 dark:border-gray-700\r
                     rounded-lg shadow-lg p-4 w-72`,style:{top:h.top-280,left:h.left},children:[(0,s.jsxs)(`div`,{className:`flex justify-between items-center mb-4`,children:[(0,s.jsx)(`button`,{onClick:()=>p(e=>e-1),className:`text-2xl text-blue-400 px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700`,children:`-`}),(0,s.jsx)(`span`,{className:`font-medium`,children:f}),(0,s.jsx)(`button`,{onClick:()=>p(e=>e+1),className:`text-2xl text-blue-400 px-2 py-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700`,children:`+`})]}),(0,s.jsx)(`div`,{className:`grid grid-cols-3 gap-2`,children:_.map((n,r)=>(0,s.jsx)(`button`,{onClick:()=>{t(`${f}-${String(r+1).padStart(2,`0`)}`),u(!1)},className:`p-2 rounded-md text-sm
                                 ${g===r&&Number(e?.split(`-`)[0])===f?`bg-gray-900 text-white dark:bg-gray-100 dark:text-gray-900`:`hover:bg-gray-100 dark:hover:bg-gray-700`}`,children:n},r))})]}),document.body)]})}export{c as t};