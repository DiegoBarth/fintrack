import{T as e,w as t}from"./react-query-Bs2h8zdQ.js";import{C as n}from"./vendor-react-g7Jl8uRT.js";import{m as r,p as i}from"./index-CgoEmYl9.js";var a=e(),o=n(),s=t();function c({value:e,onChange:t,options:n,label:c,id:l,placeholder:u=`Selecione`}){let[d,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)({top:0,left:0,width:0}),[h,g]=(0,a.useState)(-1),_=(0,a.useRef)(null),v=(0,a.useRef)(null),y=l?`${l}-listbox`:`select-listbox`;(0,a.useEffect)(()=>{if(d&&_.current){let t=_.current.getBoundingClientRect();m({top:t.top,left:t.left,width:t.width}),g(n.indexOf(e))}else g(-1)},[d,e,n]),(0,a.useEffect)(()=>{if(d&&v.current){let e=setTimeout(()=>{v.current?.scrollIntoView({block:`center`,behavior:`auto`})},10);return()=>clearTimeout(e)}},[d]),(0,a.useEffect)(()=>{function e(e){_.current&&!_.current.contains(e.target)&&f(!1)}return d&&document.addEventListener(`mousedown`,e),()=>document.removeEventListener(`mousedown`,e)},[d]);let b=e=>{t(e),f(!1)};return(0,s.jsxs)(`div`,{className:`relative w-full`,ref:_,children:[(0,s.jsxs)(`button`,{type:`button`,id:l,onClick:()=>f(!d),onKeyDown:e=>{if(!d){[`Enter`,` `,`ArrowDown`,`ArrowUp`].includes(e.key)&&(e.preventDefault(),f(!0));return}switch(e.key){case`ArrowDown`:e.preventDefault(),g(e=>e<n.length-1?e+1:0);break;case`ArrowUp`:e.preventDefault(),g(e=>e>0?e-1:n.length-1);break;case`Home`:e.preventDefault(),g(0);break;case`End`:e.preventDefault(),g(n.length-1);break;case`Enter`:e.preventDefault(),h>=0&&h<n.length&&b(n[h]);break;case`Escape`:e.preventDefault(),f(!1);break}},"aria-haspopup":`listbox`,"aria-expanded":d,"aria-labelledby":c?`${l}-label`:void 0,"aria-controls":d?y:void 0,"aria-activedescendant":d&&h>=0?`${y}-option-${h}`:void 0,className:`flex h-10 w-full items-center justify-between rounded-md border border-gray-300 dark:border-gray-600\r
               bg-white dark:bg-gray-700 p-2 text-sm outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500`,children:[(0,s.jsx)(`span`,{className:e?`text-black dark:text-white`:`text-muted-foreground dark:text-gray-400`,children:e||u}),(0,s.jsx)(i,{className:`h-4 w-4 opacity-50 dark:opacity-70 transition-transform ${d?`rotate-180`:``}`,"aria-hidden":`true`})]}),d&&(0,o.createPortal)((0,s.jsx)(`div`,{style:{position:`fixed`,top:p.top,left:p.left,width:p.width,transform:`translateY(-100%) translateY(-4px)`,zIndex:1e4},className:`overflow-hidden rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 shadow-2xl animate-in fade-in zoom-in-95`,children:(0,s.jsx)(`div`,{id:y,role:`listbox`,"aria-label":c||`Opções`,className:`max-h-60 overflow-y-auto p-1 scroll-smooth dark:bg-gray-700 custom-scrollbar`,children:n.map((t,n)=>{let i=e===t,a=h===n;return(0,s.jsxs)(`div`,{id:`${y}-option-${n}`,role:`option`,"aria-selected":i,ref:i?v:null,onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),b(t)},onMouseEnter:()=>g(n),className:`
                              flex cursor-pointer items-center justify-between rounded-sm px-3 py-2 text-sm transition-colors
                              ${a?`bg-gray-100 dark:bg-gray-800`:`hover:bg-gray-50 dark:hover:bg-gray-800/50`}
                              ${i?`font-semibold text-black dark:text-white`:`text-gray-600 dark:text-gray-300`}
                           `,children:[(0,s.jsx)(`span`,{children:t}),i&&(0,s.jsx)(r,{className:`h-4 w-4 text-black dark:text-white`,"aria-hidden":`true`})]},t)})})}),document.body)]})}export{c as t};