import{T as e,w as t}from"./react-query-Bs2h8zdQ.js";import"./x-4GkqgA1r.js";import{b as n,g as r}from"./index-DnojQBUd.js";import{o as i,r as a,t as o}from"./formatters-QxNcvdBP.js";import{t as s}from"./BaseModal-gkdyOWux.js";import"./sanitizers-BTIJ-cE9.js";import"./queryInvalidationService-hpRcjput.js";import{t as c}from"./ConfirmModal-BhWC9rsp.js";import"./expenseQuery-D9pgcEzN.js";import{t as l}from"./useExpense-CoFPHCEm.js";var u=e(),d=t();function f({isOpen:e,expense:t,onClose:f}){let{month:p,year:m}=r(),{update:h,remove:g,isSaving:_,isDeleting:v}=l(p,String(m)),[y,b]=(0,u.useState)(!1),x=n(),[S,C]=(0,u.useState)(``);(0,u.useEffect)(()=>{t&&C(i(t.amount))},[t]);let w=async()=>{await h({rowIndex:t.rowIndex,amount:o(S)}),x.success(`Gasto atualizado com sucesso!`),C(``),f()},T=()=>{b(!0)},E=async()=>{await g(t.rowIndex),x.success(`Gasto excluído com sucesso!`),C(``),f()};if(!t)return null;let D=_||v;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(s,{isOpen:e,onClose:f,title:t.description,type:`edit`,isLoading:D,loadingText:_?`Salvando...`:v?`Excluindo...`:void 0,onSave:w,onDelete:T,children:(0,d.jsxs)(`div`,{children:[(0,d.jsxs)(`div`,{className:`-mt-4 flex items-center justify-between bg-muted/30 p-3 rounded-lg border border-dashed text-xs text-muted-foreground`,children:[(0,d.jsxs)(`div`,{children:[`Categoria: `,(0,d.jsx)(`span`,{className:`font-medium text-foreground`,children:t.category})]}),(0,d.jsxs)(`div`,{children:[`Data original: `,(0,d.jsx)(`span`,{className:`font-medium text-foreground`,children:t.paymentDate})]})]}),(0,d.jsxs)(`div`,{children:[(0,d.jsx)(`label`,{htmlFor:`edit-expense-amount`,className:`block text-xs font-medium text-muted-foreground mb-1`,children:`Valor`}),(0,d.jsx)(`input`,{id:`edit-expense-amount`,"aria-label":`Valor do gasto em reais`,className:`w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900\r
                     dark:text-gray-100 rounded-md p-2 focus:ring-2`,value:S,onChange:e=>C(a(e.target.value))})]})]})}),(0,d.jsx)(c,{isOpen:y,onClose:()=>b(!1),title:`Excluir gasto`,message:`Tem certeza que deseja excluir este gasto? Essa ação não poderá ser desfeita.`,confirmLabel:`Excluir`,onConfirm:E,loading:v})]})}export{f as default};