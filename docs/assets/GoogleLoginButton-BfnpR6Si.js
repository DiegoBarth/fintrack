import{a as e}from"./rolldown-runtime-Cn8xt2Gj.js";import{T as t,w as n}from"./react-query-B5bzpzJa.js";import{u as r}from"./index-Cgvw96ep.js";var i=e(t());function a(e={}){let{nonce:t,locale:n,onScriptLoadSuccess:r,onScriptLoadError:a}=e,[o,s]=(0,i.useState)(!1),c=(0,i.useRef)(r);c.current=r;let l=(0,i.useRef)(a);return l.current=a,(0,i.useEffect)(()=>{let e=document.createElement(`script`);return e.src=`https://accounts.google.com/gsi/client`,n&&(e.src+=`?hl=${n}`),e.async=!0,e.defer=!0,e.nonce=t,e.onload=()=>{var e;s(!0),(e=c.current)==null||e.call(c)},e.onerror=()=>{var e;s(!1),(e=l.current)==null||e.call(l)},document.body.appendChild(e),()=>{document.body.removeChild(e)}},[t]),o}var o=(0,i.createContext)(null);function s({clientId:e,nonce:t,locale:n,onScriptLoadSuccess:r,onScriptLoadError:s,children:c}){let l=a({nonce:t,onScriptLoadSuccess:r,onScriptLoadError:s,locale:n}),u=(0,i.useMemo)(()=>({locale:n,clientId:e,scriptLoadedSuccessfully:l}),[e,l]);return i.createElement(o.Provider,{value:u},c)}function c(){let e=(0,i.useContext)(o);if(!e)throw Error(`Google OAuth components must be used within GoogleOAuthProvider`);return e}function l(e){return e?.clientId??e?.client_id}var u={large:40,medium:32,small:20};function d({onSuccess:e,onError:t,useOneTap:n,promptMomentNotification:r,type:a=`standard`,theme:o=`outline`,size:s=`large`,text:d,shape:f,logo_alignment:p,width:m,click_listener:h,state:g,containerProps:_,...v}){let y=(0,i.useRef)(null),{clientId:b,locale:x,scriptLoadedSuccessfully:S}=c(),C=(0,i.useRef)(e);C.current=e;let w=(0,i.useRef)(t);w.current=t;let T=(0,i.useRef)(r);return T.current=r,(0,i.useEffect)(()=>{var e,t,r;if(S)return(e=(window==null?void 0:window.google)?.accounts?.id)==null||e.initialize({client_id:b,callback:e=>{if(!e?.credential)return w.current?.call(w);let{credential:t,select_by:n}=e;C.current({credential:t,clientId:l(e),select_by:n})},...v}),(t=(window==null?void 0:window.google)?.accounts?.id)==null||t.renderButton(y.current,{type:a,theme:o,size:s,text:d,shape:f,logo_alignment:p,width:m,locale:x,click_listener:h,state:g}),n&&((r=(window==null?void 0:window.google)?.accounts?.id)==null||r.prompt(T.current)),()=>{var e;n&&((e=(window==null?void 0:window.google)?.accounts?.id)==null||e.cancel())}},[b,S,n,a,o,s,d,f,p,m,x]),i.createElement(`div`,{..._,ref:y,style:{height:u[s],..._?.style}})}var f=n();function p({onSuccess:e,onError:t}){let[n,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>r(!0),[]),n?(0,f.jsx)(s,{clientId:`341303192185-s13gbg6r8tdjtjj3lmq7ivpd4qnqpacd.apps.googleusercontent.com`,children:(0,f.jsx)(d,{onSuccess:e,onError:t,useOneTap:window.innerWidth>=768})}):null}export{p as default};