import{T as e,w as t}from"./react-query-Bs2h8zdQ.js";import{i as n}from"./vendor-react-g7Jl8uRT.js";import{b as r,g as i}from"./index-CrEqE7_v.js";import{c as a,n as o,r as s,s as c,t as l}from"./formatters-p9cTN3zd.js";import{t as u}from"./ModalBase-CvZekacX.js";import"./sanitizers-BTIJ-cE9.js";import"./queryInvalidationService-BxMLaNui.js";import"./pt-BR-CwF-q4-j.js";import{t as d}from"./DateField-BbN-VAiT.js";import{t as f}from"./ScopeChoiceModal-DsXWHF6r.js";import"./incomeQuery-CnVeQLqq.js";import{t as p}from"./useIncome-C5ctNiUH.js";var m=e(),h=t();function g({isOpen:e,income:t,onClose:g}){let{month:_,year:v}=i(),{update:y,remove:b,isSaving:x,isDeleting:S}=p(_,String(v)),C=r(),[w,T]=(0,m.useState)(``),[E,D]=(0,m.useState)(``),[O,k]=(0,m.useState)(null),[A,j]=(0,m.useState)(null);(0,m.useEffect)(()=>{t&&(T(c(t.amount)),D(t.receivedDate?o(t.receivedDate):new Date().toISOString().slice(0,10)))},[t]);let M=async()=>{j(`update`),k(`edit`)},N=async e=>{await y({rowIndex:t.rowIndex,amount:l(w),receivedDate:E,scope:e}),C.success(`Receita atualizada com sucesso!`),T(``),D(``),g()},P=async()=>{j(`delete`),k(`delete`)},F=async e=>{await b({rowIndex:t.rowIndex,scope:e}),C.success(`Receita excluÃ­da com sucesso!`),g()};if(!t)return null;let I=x||S;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u,{isOpen:e,onClose:g,title:t?.description,type:`edit`,isLoading:I,loadingText:x?`Salvando...`:`Excluindo...`,onSave:M,onDelete:P,children:(0,h.jsxs)(`div`,{className:`space-y-4`,children:[(0,h.jsxs)(`div`,{children:[(0,h.jsx)(`label`,{htmlFor:`edit-income-amount`,className:`block text-xs font-medium text-muted-foreground mb-1`,children:`Valor`}),(0,h.jsx)(`input`,{id:`edit-income-amount`,"aria-label":`Valor da receita em reais`,className:`w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900\r
                        dark:text-gray-100 rounded-md p-2 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400`,value:w,onChange:e=>T(s(e.target.value))})]}),(0,h.jsxs)(`div`,{children:[(0,h.jsx)(`label`,{htmlFor:`edit-income-received-date`,className:`block text-xs font-medium text-muted-foreground mb-1`,children:`Data de recebimento`}),(0,h.jsx)(d,{value:E?a(E):void 0,onChange:e=>{if(!e){D(``);return}D(n(e,`yyyy-MM-dd`))}})]})]})}),(0,h.jsx)(f,{isOpen:!!O,isDelete:O===`delete`,onClose:()=>{k(null),j(null)},onConfirm:e=>{k(null),A===`update`&&N(e),A===`delete`&&F(e)}})]})}export{g as default};