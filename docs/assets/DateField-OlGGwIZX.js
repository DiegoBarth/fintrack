import{T as e,w as t}from"./react-query-Bs2h8zdQ.js";import{C as n,i as r,r as i}from"./vendor-react-g7Jl8uRT.js";import{t as a}from"./pt-BR-VEqVFqnh.js";var o=e(),s=n(),c=t();function l({value:e,onChange:t,required:n}){let l=(0,o.useRef)(Math.random().toString(36).slice(2)),[u,d]=(0,o.useState)(!1),f=(0,o.useRef)(null),p=(0,o.useRef)(null),m=f.current?.getBoundingClientRect();return(0,o.useEffect)(()=>{if(u){let e=e=>{e.detail!==l.current&&d(!1)};if(window.addEventListener(`datefield:open`,e),window.dispatchEvent(new CustomEvent(`datefield:open`,{detail:l.current})),p.current){let e=p.current.querySelector(`[role="gridcell"][aria-selected="true"] button`);e||=p.current.querySelector(`[data-today="true"] button`),e||=p.current.querySelector(`[role="gridcell"] button`),e&&e.focus()}return()=>{window.removeEventListener(`datefield:open`,e)}}},[u]),(0,c.jsxs)(`div`,{className:`relative flex items-center gap-2`,children:[(0,c.jsx)(`button`,{ref:f,type:`button`,"aria-label":e?`Data selecionada: ${r(e,`PPP`,{locale:a})}`:`Selecione uma data`,onClick:()=>d(!u),className:`w-full border border-gray-300 dark:border-gray-600\r
                   bg-white dark:bg-gray-700\r
                   text-gray-900 dark:text-gray-100\r
                   rounded-md p-2 text-left focus:outline-none\r
                   focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500`,children:e?r(e,`PPP`,{locale:a}):n?(0,c.jsx)(`span`,{className:`text-muted-foreground`,children:`Selecione uma data *`}):(0,c.jsx)(`span`,{className:`text-muted-foreground`,children:`Selecione uma data`})}),e&&(0,c.jsx)(`button`,{type:`button`,"aria-label":`Limpar data`,className:`ml-1 px-2 py-1 rounded text-xs text-gray-900 dark:text-gray-100\r
                  focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500`,onClick:()=>t(void 0),tabIndex:0,children:`âœ•`}),u&&m&&(0,s.createPortal)((0,c.jsx)(`div`,{ref:p,className:`fixed z-[9999]\r
                       bg-white dark:bg-gray-800\r
                       border border-gray-200 dark:border-gray-700\r
                       rounded-lg shadow-lg p-3`,style:{top:m.top-320,left:m.left},children:(0,c.jsx)(i,{mode:`single`,selected:e,onSelect:e=>{t(e),d(!1),setTimeout(()=>{f.current?.focus()},0)},locale:a,className:`custom-calendar`})}),document.body)]})}export{l as t};