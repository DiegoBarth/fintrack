import{T as e,w as t}from"./react-query-Bs2h8zdQ.js";import{l as n,u as r}from"./vendor-react-g7Jl8uRT.js";import{E as i,S as a,b as o,h as s,k as c,v as l}from"./index-BCBKgCzZ.js";import{t as u}from"./ModalBase-Cl5-DtIa.js";import{t as d}from"./CustomSelect-DzDqOAYn.js";import{a as f,n as p,o as m,s as h,t as g}from"./useValidation-CStZuDcj.js";import"./pt-BR-VEqVFqnh.js";import{t as _}from"./DateField-OlGGwIZX.js";var v=e();const y=m({description:h().trim().min(1,`A Descrição é obrigatória`),amount:f().positive(`O Valor é obrigatório`),category:h().min(1,`A Categoria é obrigatória`),paymentDate:p({message:`A Data de pagamento é obrigatória`})});var b=t(),x={description:``,category:``,paymentDate:``,amount:``};function S({isOpen:e,onClose:t}){let{month:f,year:p}=s(),{create:m,isSaving:h}=l(f,String(p)),S=i(),{validate:C}=g(),{control:w,register:T,handleSubmit:E,reset:D}=r({defaultValues:x});return(0,v.useEffect)(()=>{e||D(x)},[e,D]),(0,b.jsx)(u,{isOpen:e,onClose:t,title:`Novo Gasto`,type:`create`,isLoading:h,onSave:E(async e=>{let n=C(y,{description:e.description,category:e.category,amount:o(String(e.amount)),paymentDate:e.paymentDate});n&&(await m(n),S.success(`Gasto criado com sucesso!`),D(x),t())}),children:(0,b.jsxs)(`div`,{className:`space-y-4`,children:[(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`label`,{htmlFor:`expense-description`,className:`block text-xs font-medium text-muted-foreground mb-1`,children:`Descrição *`}),(0,b.jsx)(`input`,{id:`expense-description`,"aria-required":`true`,placeholder:`Ex: Aluguel, Supermercado`,autoComplete:`off`,className:`w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900\r
                     dark:text-gray-100 rounded-md p-2`,...T(`description`)})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`label`,{htmlFor:`expense-amount`,className:`block text-xs font-medium text-muted-foreground mb-1`,children:`Valor *`}),(0,b.jsx)(n,{name:`amount`,control:w,render:({field:e})=>(0,b.jsx)(`input`,{id:`expense-amount`,"aria-required":`true`,"aria-label":`Valor do gasto em reais`,className:`w-full border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900\r
                           dark:text-gray-100 rounded-md p-2`,autoComplete:`off`,value:e.value,onChange:t=>e.onChange(a(t.target.value))})})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`label`,{id:`expense-category-label`,className:`block text-xs font-medium text-muted-foreground mb-1`,children:`Categoria *`}),(0,b.jsx)(n,{name:`category`,control:w,render:({field:e})=>(0,b.jsx)(d,{id:`expense-category`,label:`Categoria do gasto`,value:e.value,onChange:e.onChange,options:c})})]}),(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`label`,{htmlFor:`expense-payment-date`,className:`block text-xs font-medium text-muted-foreground mb-1`,children:`Data de pagamento *`}),(0,b.jsx)(n,{control:w,name:`paymentDate`,render:({field:e})=>(0,b.jsx)(_,{value:e.value?new Date(e.value):void 0,onChange:t=>e.onChange(t)})})]})]})})}export{S as default};