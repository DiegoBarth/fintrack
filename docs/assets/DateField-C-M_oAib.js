import{T as e,w as t}from"./react-query-B5bzpzJa.js";import{C as n,c as r,d as i,l as a,o,s,u as c}from"./vendor-react-u-2Pnofo.js";var l=e();function u(e){let t=(0,l.useRef)(null),n=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(!e)return;n.current=document.activeElement;let r=t.current;if(!r)return;let i=[`a[href]`,`input:not([disabled])`,`select:not([disabled])`,`textarea:not([disabled])`,`button:not([disabled])`,`[tabindex]:not([tabindex="-1"])`,`[role="button"]`,`[data-focusable="true"]`].join(`, `),a=Array.from(r.querySelectorAll(i));a.length>1?a[1].focus():a[0]?.focus();function o(e){if(e.key!==`Tab`||!r)return;let t=Array.from(r.querySelectorAll(i));if(t.length===0)return;let n=t[0],a=t[t.length-1];if(e.shiftKey&&document.activeElement===n){e.preventDefault(),a.focus();return}if(!e.shiftKey&&document.activeElement===a){e.preventDefault(),n.focus();return}}return document.addEventListener(`keydown`,o),()=>{document.removeEventListener(`keydown`,o),n.current?.focus()}},[e]),t}var d=t();function f({isOpen:e,onClose:t,title:n,children:r,type:i,onSave:a,onDelete:o,isLoading:s=!1,loadingText:c=`Salvando...`}){let f=u(e);return(0,l.useEffect)(()=>{if(!e)return;function n(e){e.key===`Escape`&&!s&&t()}return document.addEventListener(`keydown`,n),()=>document.removeEventListener(`keydown`,n)},[e,s,t]),e?(0,d.jsxs)(`div`,{className:`fixed inset-0 z-50 flex justify-center items-end md:items-center`,role:`dialog`,"aria-modal":`true`,"aria-labelledby":n?`modal-titulo`:void 0,children:[(0,d.jsx)(`div`,{className:`absolute inset-0 bg-black/40 dark:bg-black/70`,onClick:s?void 0:t}),(0,d.jsxs)(`div`,{ref:f,className:`relative w-full md:w-[400px] max-h-[90vh] bg-white dark:bg-gray-800 rounded-t-2xl md:rounded-2xl flex flex-col`,children:[n&&(0,d.jsxs)(`div`,{className:`flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0`,children:[(0,d.jsx)(`h2`,{id:`modal-titulo`,className:`text-lg font-semibold text-gray-900 dark:text-gray-100`,children:n}),(0,d.jsx)(`button`,{onClick:s?void 0:t,disabled:s,"aria-label":`Fechar modal`,className:`text-sm text-muted-foreground hover:text-gray-700 dark:hover:text-gray-300 transition
                        ${s?`opacity-50 cursor-not-allowed`:``}`,children:`Fechar`})]}),(0,d.jsx)(`div`,{className:`px-6 pb-6 pt-4 overflow-y-auto flex-1`,children:r}),(0,d.jsxs)(`div`,{className:`flex gap-2 p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/30 flex-shrink-0`,children:[(0,d.jsx)(`button`,{onClick:t,disabled:s,"aria-label":`Cancelar e fechar modal`,className:`
                     flex-1 rounded-lg p-2 text-sm font-medium
                     border border-gray-600
                     text-gray-300
                     bg-gray-800
                     hover:bg-gray-700
                     hover:scale-105 transition-all duration-200
                     transition-all duration-200
                     active:scale-[0.98]
                     disabled:opacity-50 disabled:cursor-not-allowed
                  `,children:`Cancelar`}),i===`edit`&&o&&(0,d.jsx)(`button`,{onClick:o,type:`button`,disabled:s,"aria-label":`Excluir registro permanentemente`,className:`
                        flex-1 rounded-lg p-2 text-sm font-medium
                        bg-rose-600
                        hover:bg-rose-700
                        hover:scale-105 transition-all duration-200
                        text-white
                        transition-all duration-200
                        active:scale-[0.98]
                        disabled:opacity-50 disabled:cursor-not-allowed
                     `,children:s&&c===`Excluindo...`?`Excluindo...`:`Excluir`}),a&&(0,d.jsx)(`button`,{onClick:a,"aria-label":i===`create`?`Salvar novo registro`:`Salvar alterações`,type:`button`,disabled:s,className:`
                        flex-1 rounded-lg p-2 text-sm font-medium
                        bg-emerald-600
                        hover:bg-emerald-700
                        hover:scale-105 transition-all duration-200
                        text-white
                        shadow-md shadow-emerald-900/20
                        transition-all duration-200
                        active:scale-[0.98]
                        disabled:opacity-50 disabled:cursor-not-allowed
                     `,children:s&&c!==`Excluindo...`?c:`Salvar`})]})]})]}):null}var p={lessThanXSeconds:{one:`menos de um segundo`,other:`menos de {{count}} segundos`},xSeconds:{one:`1 segundo`,other:`{{count}} segundos`},halfAMinute:`meio minuto`,lessThanXMinutes:{one:`menos de um minuto`,other:`menos de {{count}} minutos`},xMinutes:{one:`1 minuto`,other:`{{count}} minutos`},aboutXHours:{one:`cerca de 1 hora`,other:`cerca de {{count}} horas`},xHours:{one:`1 hora`,other:`{{count}} horas`},xDays:{one:`1 dia`,other:`{{count}} dias`},aboutXWeeks:{one:`cerca de 1 semana`,other:`cerca de {{count}} semanas`},xWeeks:{one:`1 semana`,other:`{{count}} semanas`},aboutXMonths:{one:`cerca de 1 mês`,other:`cerca de {{count}} meses`},xMonths:{one:`1 mês`,other:`{{count}} meses`},aboutXYears:{one:`cerca de 1 ano`,other:`cerca de {{count}} anos`},xYears:{one:`1 ano`,other:`{{count}} anos`},overXYears:{one:`mais de 1 ano`,other:`mais de {{count}} anos`},almostXYears:{one:`quase 1 ano`,other:`quase {{count}} anos`}};const m=(e,t,n)=>{let r,i=p[e];return r=typeof i==`string`?i:t===1?i.one:i.other.replace(`{{count}}`,String(t)),n?.addSuffix?n.comparison&&n.comparison>0?`em `+r:`há `+r:r},h={date:i({formats:{full:`EEEE, d 'de' MMMM 'de' y`,long:`d 'de' MMMM 'de' y`,medium:`d MMM y`,short:`dd/MM/yyyy`},defaultWidth:`full`}),time:i({formats:{full:`HH:mm:ss zzzz`,long:`HH:mm:ss z`,medium:`HH:mm:ss`,short:`HH:mm`},defaultWidth:`full`}),dateTime:i({formats:{full:`{{date}} 'às' {{time}}`,long:`{{date}} 'às' {{time}}`,medium:`{{date}}, {{time}}`,short:`{{date}}, {{time}}`},defaultWidth:`full`})};var g={lastWeek:e=>{let t=e.getDay();return`'`+(t===0||t===6?`último`:`última`)+`' eeee 'às' p`},yesterday:`'ontem às' p`,today:`'hoje às' p`,tomorrow:`'amanhã às' p`,nextWeek:`eeee 'às' p`,other:`P`};const _={code:`pt-BR`,formatDistance:m,formatLong:h,formatRelative:(e,t,n,r)=>{let i=g[e];return typeof i==`function`?i(t):i},localize:{ordinalNumber:(e,t)=>{let n=Number(e);return t?.unit===`week`?n+`ª`:n+`º`},era:c({values:{narrow:[`AC`,`DC`],abbreviated:[`AC`,`DC`],wide:[`antes de cristo`,`depois de cristo`]},defaultWidth:`wide`}),quarter:c({values:{narrow:[`1`,`2`,`3`,`4`],abbreviated:[`T1`,`T2`,`T3`,`T4`],wide:[`1º trimestre`,`2º trimestre`,`3º trimestre`,`4º trimestre`]},defaultWidth:`wide`,argumentCallback:e=>e-1}),month:c({values:{narrow:[`j`,`f`,`m`,`a`,`m`,`j`,`j`,`a`,`s`,`o`,`n`,`d`],abbreviated:[`jan`,`fev`,`mar`,`abr`,`mai`,`jun`,`jul`,`ago`,`set`,`out`,`nov`,`dez`],wide:[`janeiro`,`fevereiro`,`março`,`abril`,`maio`,`junho`,`julho`,`agosto`,`setembro`,`outubro`,`novembro`,`dezembro`]},defaultWidth:`wide`}),day:c({values:{narrow:[`D`,`S`,`T`,`Q`,`Q`,`S`,`S`],short:[`dom`,`seg`,`ter`,`qua`,`qui`,`sex`,`sab`],abbreviated:[`domingo`,`segunda`,`terça`,`quarta`,`quinta`,`sexta`,`sábado`],wide:[`domingo`,`segunda-feira`,`terça-feira`,`quarta-feira`,`quinta-feira`,`sexta-feira`,`sábado`]},defaultWidth:`wide`}),dayPeriod:c({values:{narrow:{am:`a`,pm:`p`,midnight:`mn`,noon:`md`,morning:`manhã`,afternoon:`tarde`,evening:`tarde`,night:`noite`},abbreviated:{am:`AM`,pm:`PM`,midnight:`meia-noite`,noon:`meio-dia`,morning:`manhã`,afternoon:`tarde`,evening:`tarde`,night:`noite`},wide:{am:`a.m.`,pm:`p.m.`,midnight:`meia-noite`,noon:`meio-dia`,morning:`manhã`,afternoon:`tarde`,evening:`tarde`,night:`noite`}},defaultWidth:`wide`,formattingValues:{narrow:{am:`a`,pm:`p`,midnight:`mn`,noon:`md`,morning:`da manhã`,afternoon:`da tarde`,evening:`da tarde`,night:`da noite`},abbreviated:{am:`AM`,pm:`PM`,midnight:`meia-noite`,noon:`meio-dia`,morning:`da manhã`,afternoon:`da tarde`,evening:`da tarde`,night:`da noite`},wide:{am:`a.m.`,pm:`p.m.`,midnight:`meia-noite`,noon:`meio-dia`,morning:`da manhã`,afternoon:`da tarde`,evening:`da tarde`,night:`da noite`}},defaultFormattingWidth:`wide`})},match:{ordinalNumber:r({matchPattern:/^(\d+)[ºªo]?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:a({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},defaultMatchWidth:`wide`,parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},defaultParseWidth:`any`}),quarter:a({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},defaultMatchWidth:`wide`,parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:`any`,valueCallback:e=>e+1}),month:a({matchPatterns:{narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|março|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},defaultMatchWidth:`wide`,parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},defaultParseWidth:`any`}),day:a({matchPatterns:{narrow:/^(dom|[23456]ª?|s[aá]b)/i,short:/^(dom|[23456]ª?|s[aá]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[aá]b)/i,wide:/^(domingo|(segunda|ter[cç]a|quarta|quinta|sexta)([- ]feira)?|s[aá]bado)/i},defaultMatchWidth:`wide`,parsePatterns:{short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[aá]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[aá]b/i]},defaultParseWidth:`any`}),dayPeriod:a({matchPatterns:{narrow:/^(a|p|mn|md|(da) (manhã|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manhã|tarde|noite))/i},defaultMatchWidth:`any`,parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manhã/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},defaultParseWidth:`any`})},options:{weekStartsOn:0,firstWeekContainsDate:1}};var v=n();function y({value:e,onChange:t,required:n}){let r=(0,l.useRef)(Math.random().toString(36).slice(2)),[i,a]=(0,l.useState)(!1),c=(0,l.useRef)(null),u=(0,l.useRef)(null),f=c.current?.getBoundingClientRect();return(0,l.useEffect)(()=>{if(i){let e=e=>{e.detail!==r.current&&a(!1)};if(window.addEventListener(`datefield:open`,e),window.dispatchEvent(new CustomEvent(`datefield:open`,{detail:r.current})),u.current){let e=u.current.querySelector(`[role="gridcell"][aria-selected="true"] button`);e||=u.current.querySelector(`[data-today="true"] button`),e||=u.current.querySelector(`[role="gridcell"] button`),e&&e.focus()}return()=>{window.removeEventListener(`datefield:open`,e)}}},[i]),(0,d.jsxs)(`div`,{className:`relative flex items-center gap-2`,children:[(0,d.jsx)(`button`,{ref:c,type:`button`,"aria-label":e?`Data selecionada: ${s(e,`PPP`,{locale:_})}`:`Selecione uma data`,onClick:()=>a(!i),className:`w-full border border-gray-300 dark:border-gray-600\r
                   bg-white dark:bg-gray-700\r
                   text-gray-900 dark:text-gray-100\r
                   rounded-md p-2 text-left focus:outline-none\r
                   focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500`,children:e?s(e,`PPP`,{locale:_}):n?(0,d.jsx)(`span`,{className:`text-muted-foreground`,children:`Selecione uma data *`}):(0,d.jsx)(`span`,{className:`text-muted-foreground`,children:`Selecione uma data`})}),e&&(0,d.jsx)(`button`,{type:`button`,"aria-label":`Limpar data`,className:`ml-1 px-2 py-1 rounded text-xs text-gray-900 dark:text-gray-100\r
                  focus:outline-none focus:ring-2 focus:ring-gray-300 dark:focus:ring-gray-500`,onClick:()=>t(void 0),tabIndex:0,children:`✕`}),i&&f&&(0,v.createPortal)((0,d.jsx)(`div`,{ref:u,className:`fixed z-[9999]\r
                       bg-white dark:bg-gray-800\r
                       border border-gray-200 dark:border-gray-700\r
                       rounded-lg shadow-lg p-3`,style:{top:f.top-320,left:f.left},children:(0,d.jsx)(o,{mode:`single`,selected:e,onSelect:e=>{t(e),a(!1),setTimeout(()=>{c.current?.focus()},0)},locale:_,className:`custom-calendar`})}),document.body)]})}export{u as i,_ as n,f as r,y as t};