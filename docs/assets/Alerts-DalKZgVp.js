const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CommitmentsModal-CiYhi4kD.js","assets/react-query-B5bzpzJa.js","assets/rolldown-runtime-Cn8xt2Gj.js","assets/createLucideIcon-DIUIV8YK.js","assets/calendar-Bk9CUKnl.js","assets/x-DKWcFa7g.js","assets/formatters-DVAU20Gu.js","assets/EditCommitmentModal-CebhRWSK.js","assets/vendor-react-u-2Pnofo.js","assets/vendor-react-Chw94eNX.css","assets/clsx-C7a_t6ND.js","assets/DateField-C-M_oAib.js","assets/utils-DFP6x-mX.js","assets/PeriodContext-Brl72alo.js","assets/index-Cgvw96ep.js","assets/index-B4CUnx_H.css","assets/ScopeChoiceModal-DeYDEXY8.js","assets/EditCommitmentModal-D5TCtwSG.js","assets/ConfirmModal-DSNM3NTe.js"])))=>i.map(i=>d[i]);
import{T as e,w as t}from"./react-query-B5bzpzJa.js";import{x as n}from"./vendor-react-u-2Pnofo.js";import{d as r,h as i}from"./index-Cgvw96ep.js";import{i as a,n as o}from"./PeriodContext-Brl72alo.js";import"./formatters-DVAU20Gu.js";var s=e();function c(e){let t=new Date(e);return t.setHours(0,0,0,0),t}function l(){let{year:e}=o(),{alertCommitments:t}=a(`all`,String(e));return(0,s.useMemo)(()=>{let e=c(new Date),n=t.filter(e=>!e.paymentDate);return{overdue:n.filter(t=>{let[n,i,a]=t.dueDate.split(`/`).map(Number),o=c(new Date(a,i-1,n));return Math.ceil((o.getTime()-e.getTime())/r)<0}),today:n.filter(t=>{let[n,r,i]=t.dueDate.split(`/`).map(Number);return c(new Date(i,r-1,n)).getTime()===e.getTime()}),week:n.filter(t=>{let[n,i,a]=t.dueDate.split(`/`).map(Number),o=c(new Date(a,i-1,n)),s=Math.ceil((o.getTime()-e.getTime())/r);return s>0&&s<=7})}},[t])}var u=t(),d=(0,s.lazy)(()=>n(()=>import(`./CommitmentsModal-CiYhi4kD.js`),__vite__mapDeps([0,1,2,3,4,5,6]))),f=(0,s.lazy)(()=>n(()=>import(`./EditCommitmentModal-CebhRWSK.js`),__vite__mapDeps([7,8,1,2,9,10,11,3,5,12,13,14,15,6,16,17,18])));function p({title:e,gradientFrom:t,gradientTo:n,onClick:r}){return(0,u.jsxs)(`button`,{onClick:r,className:`\r
            w-full text-left\r
            rounded-xl p-2 text-white\r
            flex items-center justify-between\r
            gap-2\r
            active:scale-[0.98] \r
            hover:scale-105 \r
            hover:shadow-lg\r
            transition-all \r
            duration-200\r
            group`,style:{background:`linear-gradient(135deg, ${t} 0%, ${n} 100%)`},children:[(0,u.jsx)(`h3`,{className:`text-sm font-medium text-white/90 truncate group-hover:text-white`,children:e}),(0,u.jsx)(`span`,{className:`text-xs opacity-80 whitespace-nowrap group-hover:opacity-100 group-hover:font-medium transition-all`,children:`Ver detalhes`})]})}function m(){let{overdue:e,today:t,week:n}=l(),[r,i]=(0,s.useState)(null),[a,o]=(0,s.useState)(null),[c,m]=(0,s.useState)([]),[h,g]=(0,s.useState)(null);function _(){h===`overdue`&&b.length>0&&i(`overdue`),h===`today`&&x.length>0&&i(`today`),h===`week`&&S.length>0&&i(`week`)}function v(e){m(t=>[...t,e]),o(null),setTimeout(_,0)}let y=(e,t,n)=>e===1?t:n,b=e.filter(e=>!c.includes(e.rowIndex)),x=t.filter(e=>!c.includes(e.rowIndex)),S=n.filter(e=>!c.includes(e.rowIndex));return!b.length&&!x.length&&!S.length?null:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(`div`,{className:`grid gap-3 grid-cols-1 sm:grid-cols-[repeat(auto-fit,minmax(260px,1fr))] justify-center`,children:[b.length>0&&(0,u.jsx)(p,{title:`${b.length} ${y(b.length,`conta vencida`,`contas vencidas`)}`,gradientFrom:`#b91c1c`,gradientTo:`#dc2626`,onClick:()=>i(`overdue`)}),x.length>0&&(0,u.jsx)(p,{title:`${x.length} ${y(x.length,`conta vencendo hoje`,`contas vencendo hoje`)}`,gradientFrom:`#ea580c`,gradientTo:`#fb923c`,onClick:()=>i(`today`)}),S.length>0&&(0,u.jsx)(p,{title:`${S.length} ${y(S.length,`conta vencendo essa semana`,`contas vencendo essa semana`)}`,gradientFrom:`#0891b2`,gradientTo:`#22d3ee`,onClick:()=>i(`week`)})]}),(0,u.jsxs)(s.Suspense,{fallback:null,children:[r&&(0,u.jsx)(d,{isOpen:!!r,title:r===`overdue`?`Vencidos`:r===`today`?`Vencem hoje`:`Vencem essa semana`,items:r===`overdue`?b:r===`today`?x:S,onClose:()=>i(null),onSelect:e=>{g(r),i(null),o(e)}}),a&&(0,u.jsx)(f,{isOpen:!!a,commitment:a,onClose:()=>{o(null),_()},onConfirm:v})]})]})}export{m as default};